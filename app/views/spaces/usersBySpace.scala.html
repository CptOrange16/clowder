@(space: ProjectSpace, creator: Option[User], userRoleMap: Map[User, String], externalUsers: List[User], roleList: List[String])(implicit user: Option[models.User])

@import play.api.libs.json._


<h3>Members</h3>

Owner: <a href= "@routes.Profile.viewProfile(creator.get.email)" title="@creator.get.email"> @creator.get.fullName</a>

<div id="userlist">    
	@if(userRoleMap.size == 0) {
	   <ul class="list-unstyled">
	       <li>No other members</li>
	   </ul>
	}
	
	@for(aRole <- roleList) {
	    <h5>@aRole</h5>
	    <ul>
		@for((k,v) <- userRoleMap) {
		    @if(aRole == v) {    		         
		        <li><a href= "@routes.Profile.viewProfile(k.email)" title="@k.email">@k.fullName</a></li>
		    }    
		}
		</ul> 
	}		
</div>



@if(user.isDefined) {
	<a class="btn btn-default btn-xs btn-margins accordion-toggle collapsed" data-toggle="modal"
	data-target="#modalUser" id="edituseralloc"
	title="Edit User Allocation">
	    <span class="glyphicon glyphicon-edit"></span> Edit
	</a>
}

<div class="modal fade bs-example-modal-lg" id="modalUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
			&times;</button>
			<h4 class="modal-title">Edit Users and Roles</h4>
			</div>
			<div class="modal-body">
			@spaces.userAllocation(userRoleMap, externalUsers, roleList)
			</div>
			<div class="modal-footer">
			<button class="btn btn-primary" title="Update User Information" onclick="return updateUsersInSpace('@space.id', '@(routes.Spaces.getSpace(space.id))')">
                <span class="glyphicon glyphicon-edit"></span> Submit
            </button>
			<a href="#" class="btn btn-default" id="closebutton" data-dismiss="modal">Close</a>			
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
    var roleArray = @Html(Json.stringify(Json.toJson(roleList)))
</script>
<script src="@routes.Assets.at("javascripts/spaces/modify.js")" type="text/javascript"></script>
