@(resourceId: UUID, resourceType: Symbol, otherSpaces: List[ProjectSpace], resourceSpaces: Option[List[ProjectSpace]])(implicit user: Option[models.User])

@import play.api.libs.json.Json

<div class="row">
    <form class="form-inline requiresLogin requiresLoginCommunity">
        <div class="input-group input-group-sm col-md-8">
            <select id="spaceAvailable" class="form-control" style="width: 100%">
            </select>
            <span class="input-group-btn">
                <button class="btn btn-default btn-large" id="addDatasBtn" title="Add File to Dataset">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
            </span>
        </div>
    </form>
</div>
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/chosen.css")">
<script src="@routes.Assets.at("javascripts/chosen.jquery.js")" type="text/javascript"></script>

<script language="javascript">
    $(".chosen-select2").chosen({
        width: "90%",
        placeholder_text_multiple: "Select spaces"
    });
</script>

<script language = "javascript">

$("#spaceAvailable").select2({
        theme: "bootstrap",
        placeholder: "Select a dataset",
        allowClear: true,
        ajax: {
            url: function(params) {
                return jsRoutes.api.Spaces.listSpacesCanAdd(params.term, null, 10).url;
            },
            data: function(params) {
                return { title: params.term };
            },
            processResults: function(data, page) {
                return {results: data.filter(function(x) {
                    return $.inArray(x.id, @Html(Json.stringify(Json.toJson(resourceSpaces.getOrElse(List.empty)
                            .map(x=>x.id.toString()))))) == -1;
                }).map(function(x) {
                    return {
                        text: x.datasetname,
                        id: x.id
                    }
                })};
            }
        }
    });

</script>
