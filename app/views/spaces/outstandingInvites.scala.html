@(space: ProjectSpace, creator: Option[User], userRoleMap: Map[User, String], externalUsers: List[User], roleList: List[String])(implicit user: Option[models.User])

@import api.Permission
@import play.api.libs.json._
@import play.api.Play.current

<div class="row">
    <div class="col-md-12">
        @if(Permission.checkPermission(Permission.EditUser, ResourceRef(ResourceRef.space, space.id))) {

            @if(space.requests.isEmpty) {
                <ul class="list-unstyled"><li>No outstanding invites</li></ul>
            } else {
                <table id="outstanding-invites" class="table">
                    <tbody>
                        @for(user <- space.requests) {
                            <tr id="request-tr-@user.id.stringify">
                                <td>
                                    <a href="@routes.Profile.viewProfileUUID(user.id)">@user.name</a>
                                </td>

                                <td>
                                    <select id="roleSelect" class="chosen-select btn btn-success btn-xs">
                                        <option value="Viewer">Viewer</option>
                                        <option value="Editor">Editor</option>
                                        <option value="Admin">Admin</option>
                                    </select>
                                </td>

                                <td>
                                    <button class="btn btn-default btn-xs" id="request-accept-@user.id.stringify" title="Accept request" onclick="return acceptSpaceRequest('@space.id', '@user.id.toString')">
                                        Accept
                                    </button>&nbsp;
                                    <button class="btn btn-default btn-xs" id="request-reject-@user.id.stringify" title="Reject request" onclick= "return rejectSpaceRequest('@space.id', '@user.id.toString')">
                                        Reject
                                    </button>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                <button class="btn btn-default" type="button" id="close-button" title="Close" onClick= "window.location.reload();">Close</button>
            }

        }
    </div>
</div>

<script type="text/javascript">
    var roleArray = @Html(Json.stringify(Json.toJson(roleList)))
</script>
<script src="@routes.Assets.at("javascripts/spaces/modify.js")" type="text/javascript"></script>

