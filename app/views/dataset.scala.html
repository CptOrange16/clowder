@(dataset: models.Dataset, previewers: Array[Previewer]) 

@main("Dataset") {
	<div class="page-header">
		<h1>@dataset.name</h1>
	</div>
	<div class="row-fluid">
		<div class="span12">
			<div class="tabbable">
				<ul class="nav nav-pills" id="myTab">
				@previewers.map { p =>
			  		<li class=""><a href="#previewer_@p.id" data-toggle="tab">@p.id</a></li>
			    }
				</ul>
				<div class="tab-content">
				@previewers.map { p =>
    				<div class="tab-pane" id="previewer_@p.id">
      				<p>@p.id</p>
    				</div>
    			}
	  			</div>
			</div>
  			<script type="text/javascript">
				$(function () {
    				$('#myTab a:first').tab('show');
 				 })
			</script>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span6">
			<dl class="dl-horizontal">
				<dt>Name:</dt>
				<dd>@dataset.name</dd>
				<dt>Description:</dt>
				<dd>@dataset.description</dd>
			    <dt>Created:</dt>
				<dd>@dataset.created</dd>
			</dl>
			
		</div>
		<div class="span6">
		  <h5>Files</h5>
			@dataset.files.map { file =>
			<div><a href="@(routes.Files.file(file.id.toString))">@file.filename</a></div>
			}
		</div>
	</div>
	<div class="row-fluid">
		<div class="span6">
		</div>
		<div class="span6">
		    <h5>Tags</h5>
			<ul id="tagList">
				@dataset.tags.map { tag =>
				  <li>@tag</li>
				}
			</ul>
			<input type="text" placeholder="Text input" id="tagField">
			<button class="btn" id="tagB">Tag</button>
		</div>
		<script language="javascript">
		$(function() {
		   $('#tagB').click(function() {
		     var tag = $('#tagField').val();
		     console.log("submitting tag " + tag);
		     console.log("@routes.Tags.tag");
		     
		     var request = jsRoutes.controllers.Tags.tag().ajax({
		       data: JSON.stringify({"id":"@dataset.id","tag":tag}),
		       type: 'POST',
		       contentType: "application/json",
		     });
		     
		     request.done(function (response, textStatus, jqXHR){
		        console.log("Response " + response);
		        $('#tagList').append('<li>' + tag + '</li>');
		     });
    
		     request.fail(function (jqXHR, textStatus, errorThrown){
		        console.error(
		            "The following error occured: "+
		            textStatus, errorThrown
		        );
		     });
		  });
		 });
	     </script>
	</div>
	<script src="@routes.Assets.at("javascripts/previews.js")" type="text/javascript"></script>
	@previewers.map { p =>
		<script>
			var Configuration = {};
			Configuration.id = "@dataset.id";
			Configuration.bytes = "@routes.Files.file(dataset.id.toString)"
		</script>
		<script type="text/javascript" src="@(routes.Assets.at(p.path) + "/" + p.main)"></script>
	}
}
