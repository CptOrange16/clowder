@(files: List[models.File], prev: String, next: String, limit: Int)(implicit user: Option[securesocial.core.Identity])

@import _root_.util.Formatters.ellipsize
@import org.apache.commons.io._

@main("Files") {
<div class="page-header">
  <h1>Files</h1>
</div>

<div class="row">
    <div class="col-md-12">
        <div id="masonry">
            @files.map { file =>
            <div class="post-box col-lg-3 col-md-3 col-sm-3">
                <div class="panel panel-default">
                    <div class="pull-right">
                        <a href="#" title="Bookmark" class="pull-right bookmark-link"><span class="glyphicon glyphicon-bookmark bookmark"></span></a>
                    </div>
                    <div class="panel-body">
                        @if(!file.thumbnail_id.isEmpty){
                        <a href="@(routes.Files.file(file.id))">
                            <img class="img-responsive" src="@(routes.Files.thumbnail(UUID(file.thumbnail_id.toString().substring(5,file.thumbnail_id.toString().length-1))))" alt="Thumbnail of @(file.filename)">
                        </a>
                        }
                        <div class="caption">
                            <h4><a href="@(routes.Files.file(file.id))">@file.filename</a></h4>
                            <ul class="list-unstyled">
                                <li>Author: <strong>@file.author.fullName</strong></li>
                                <li>Uploaded: <strong>@file.uploadDate.format("dd MMM, yyyy")</strong></li>
                                <li>Size: <strong>@FileUtils.byteCountToDisplaySize(file.length)</strong></li>
                            </ul>
                        </div>
                    </div>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="glyphicon glyphicon glyphicon-tags" title="@file.tags.size tags"></span>  @file.tags.size
                            <span class="glyphicon glyphicon glyphicon-list" title="@file.userMetadata.keys.size metadata fields"></span>  @file.userMetadata.keys.size
                        </li>
                    </ul>
                </div>
            </div>
            }
        </div>
    </div>
</div>


<div class="row">
	<div class="col-md-12">
		<table class="table table-bordered table-hover">
			<thead>
				<tr>
					<th>Name</th>
					<th>Type</th>
					<th>Uploaded</th>
					<th></th>
					@if(user.isDefined) {
						<th></th>
					}
				</tr>
			</thead>
			<tbody>
				@files.map { file =>
					<tr>
						<td><a href="@(routes.Files.file(file.id))">@file.filename</a></td>
						<td>@(if(file.contentType != null) file.contentType else "N/A")</td>
						<td>@file.uploadDate</td>
						<td>
							@if(!file.thumbnail_id.isEmpty){<img src="@(routes.Files.thumbnail(UUID(file.thumbnail_id.toString().substring(5,file.thumbnail_id.toString().length-1))))" alt="Thumbnail of @(file.filename)" width="120">}
							@if(file.thumbnail_id.isEmpty){No thumbnail available}
						</td>
						@if(user.isDefined) {
							<td><a href="#" onclick="removeFile('@(file.id)',event)">Remove</a></td>
						}
					</tr>
				}
			</tbody>
		</table>
		<ul class="pager">
			@if(prev != "") {
  			<li class="previous"><a href="@(routes.Files.list("b", prev, limit))">Previous</a></li>
  			}
  			@if(next != "") {
  			<li class ="next"><a href="@(routes.Files.list("a", next, limit))">Next</a></li>
  			}
		</ul>
	</div>
</div>
<script language="javascript">	
	var hostIp = "@play.Play.application().configuration().getString("hostIp")";
</script>
<script src="@routes.Assets.at("javascripts/fileListProcess.js")" type="text/javascript"></script>
@util.masonry()
}
