@(id: UUID, name:String, desc:String, defaultspace:Option[ProjectSpace], spaces: List[models.ProjectSpace], isNameRequired: Boolean, isDescriptionRequired: Boolean, isNew:Boolean)(implicit user: Option[models.User])

@import api.Permission

@main("Curation Object") {
    <script src="@routes.Assets.at("javascripts/curation-create.js")" language="javascript"></script>
    <script src="@routes.Assets.at("javascripts/htmlEncodeDecode.js")" language="javascript"></script>
    <script type="text/javascript" language="javascript">
      //Global so that the javascript for the collection creation can reference this.
      var isNameRequired = @isNameRequired;
      var isDescRequired = @isDescriptionRequired;
    </script>
    @if(isNew) {
        <div class="page-header">
            <h1>Create New Curation Object</h1>
        </div>
    } else {
        <div class="page-header">
            <h1>Edit Curation Object</h1>
        </div>
    }

    <div class="row">
        <div class="col-md-12">
    <table style="width: 100%; margin-bottom: 40px; margin-top: 40px;">
        <tr>
            <td style="width: 20%; vertical-align:top;" class="input-table-cell">Name:</td>
            <td style="width: 35%; vertical-align:top;" class="input-table-cell">
                <textarea cols=40 rows=4 type="text" id="name">@name</textarea>
            </td>
            <td style="vertical-align:top;" class="input-table-cell">
                <span class="error hiddencomplete" id="nameerror"> The name is a required field</span><br>
            </td>
        </tr>
        <tr>
            <td style="width: 20%; vertical-align:top;" class="input-table-cell">Description:</td>
            <td style="width: 35%; vertical-align:top;" class="input-table-cell" id="desccell">
                <textarea cols=40 rows=4 type="text" id="description">@desc</textarea>
            </td>
            <td style="vertical-align:top;" class="input-table-cell">
                <span class="error hiddencomplete" id="descerror"> This description is a required field</span><br>
            </td>
        </tr>



        @if( !spaces.isEmpty) {
            <tr>
                <td style="width : 20 % ; vertical-align : top ;" class="input-table-cell">Space:</td>
                <td style="width : 35 % ; vertical-align : top ;" class="input-table-cell" id="desccell">
                    <select  name="space" id="spaceid" class = "chosen-select"  style="width : 342 px ;">
                        @defaultspace match {
                            case Some(defaultspace) => {
                                <option value="@(defaultspace.id)">@(defaultspace.name)</option>
                                @spaces.map { space =>
                                    @if(space.id != defaultspace.id) {
                                        <option value="@(space.id)">@(space.name)</option>
                                    }
                                }
                            }
                            case None => {
                                <option selected disabled>Select the space</option>
                                @spaces.map { space =>

                                        <option value="@(space.id)">@(space.name)</option>

                                }
                            }
                        }
                    </select>
                </td>
                <td style="vertical-align:top;" class="input-table-cell">
                    <span class="error hiddencomplete" id="spaceerror"> Please select a space.</span><br>
                </td>

            </tr>

        <tr>
            <td>
            </td>
            <td>
                @if(isNew) {
                    <button class="btn btn-primary btn-margins" title="Create the CO" onclick="return createCuration();">
                        <span class="glyphicon glyphicon-upload"></span> Create
                    </button>
                    <button class="btn btn-default btn-margins" title="Clear the input fields" onclick="return clearFields();">
                        <span class="glyphicon glyphicon-refresh"></span> Reset
                    </button>
                } else {
                    <button class="btn btn-default btn-margins" title="Edit Curation Object" onclick="return updateCuration('@id');">
                        <span class="glyphicon glyphicon-upload"></span> Update
                    </button>
                    <button class="btn btn-default btn-margins" title="cancel edit" onclick="return cancelEdit('@id');">
                        <span class="glyphicon glyphicon-remove-sign"></span> Cancel
                    </button>
                }
            </td>
        </tr>

        }else{
            <tr>
                <td style="width : 20 % ; vertical-align : top ;" class="input-table-cell">Space:</td>
                <td>No spaces available for creating Curation Object. Please add this dataset to a space first</td>
            </tr>
            <tr>
                <td>
                </td>
                <td>
                    @if(isNew) {
                        <button class="btn btn-primary btn-margins disabled" title="Create the CO" onclick="return createCuration();">
                            <span class="glyphicon glyphicon-upload"></span> Create
                        </button>
                        <button class="btn btn-default btn-margins" title="Clear the input fields" onclick="return clearFields();">
                            <span class="glyphicon glyphicon-refresh"></span> Reset
                        </button>
                    } else {
                        <button class="btn btn-primary btn-margins disabled" title="Edit Curation Object" onclick="return updateCuration('@id');">
                            <span class="glyphicon glyphicon-upload"></span> Update
                        </button>
                        <button class="btn btn-default btn-margins" title="cancel edit" onclick="return cancelEdit('@id');">
                            <span class="glyphicon glyphicon-refresh"></span> Cancel
                        </button>
                    }

                </td>
            </tr>
        }
    </table>


            <form id="curationcreate"  method="POST" enctype="multipart/form-data">
                    <!-- Redirect browsers with JavaScript disabled to the origin page -->
                <noscript>Javascript is required in order to use the uploader to create a new dataset.</noscript>

                <input type="hidden" name="name" id="hiddenname" value="not set">
                <input type="hidden" name="description" id="hiddendescription" value="not set">

            </form>
        </div>
    </div>

    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/chosen.css")">
    <script src="@routes.Assets.at("javascripts/chosen.jquery.js")" type="text/javascript"></script>
    <script language="javascript">
    $(".chosen-select").chosen({
        width: "100%",
        placeholder_text_multiple: "Select live objects for this curation object."
    });
</script>

}