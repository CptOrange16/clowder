@(fileName:String, resultsList:List[(models.Index.Index,  List[models.PreviewFilesSearchResult])])   						

@import models.Index
@import models.PreviewFilesSearchResult
@import helper._
@import collection.JavaConverters._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@main("Search Results") {
	
	
 @*********************
* This is a comment *
*********************@

@*************************************
 * Home page.                        *
 *                                   *
 * @param msg The message to display *
 *************************************@
	<div class="page-header">
		<h1>Search Results For <medium>@fileName</medium></h1>
	</div>
	@if(resultsList.size == 0) {
	<div class="row">
		<div class="col-md-12">
			No results found. Sorry!
		</div>
	</div>
	} else {
	<table>
	<tr>
  
	@for((index, previewsAndFiles) <- resultsList) {
		
		<td>
		<h3>@index.extractorID / @index.measureID / @index.indexerType</h3>
		<table>
		@for(oneResult <- previewsAndFiles) {			
			<tr>
				<td style="vertical-align:middle; height:150px;">
					<div class="media">
					  <a class="pull-left" href=@oneResult.url>
						
						@if(oneResult.fileOrPreview.equalsIgnoreCase("file")){							
							@if(!oneResult.thumbnail_id.isEmpty){
								<img class='mmd-img media-object' 
									src='@(routes.Files.thumbnail(oneResult.thumbnail_id))'
									alt='Thumbnail of @(oneResult.title)' 
									title='Distance @oneResult.distance'>
								</img>
							}
							@if(oneResult.thumbnail_id.isEmpty){No thumbnail available}						
							<br>												
						}	@*end of is FIle*@		
						
						@if(oneResult.fileOrPreview.equalsIgnoreCase("preview")){					
						
						<img class='mmd-img media-object' 
							src='@api.routes.Previews.download(oneResult.id)' 
							alt='@oneResult.title' 
							title='Distance @oneResult.distance'>
						</img>
						}@* end of If Preview *@
						
					  </a>
					  <div class="media-body">
					    <h4 class="media-heading">@oneResult.title</h4>
					    <p>Distance: @oneResult.distance</p>				    
						
					    @if(oneResult.datasetIdList.size==0){
					    	No dataset associated with this image 
					    }
					  @if(oneResult.datasetIdList.size>0){
					  	<b>Belongs to  @oneResult.datasetIdList.size dataset(s)</b>
					  	@oneResult.datasetIdList.map{id=>					   
					     		<br><a href=@routes.Datasets.dataset(id)> View Dataset </a>
					    	}  						  	 
					    }	    
					     
					    @if(oneResult.fileOrPreview.equalsIgnoreCase("file")){ 
					    	<br>
					    	
					    	<a href=@routes.Search.findSimilarFile(oneResult.id)>Find Similar</a>
					 
					     	<br>
					     	<a href="@(routes.Files.file(oneResult.id))">View File @oneResult.title</a>
					    } 
					     
					  </div>
					</div>
					</td></tr>
		}
		</table></td>
	}
	</tr>
	</table>
	}
}