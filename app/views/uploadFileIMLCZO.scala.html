@(myForm: Form[FileMD])(implicit user: Option[securesocial.core.Identity])



@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

<!-- 
The majority of this file has now been changed to be based off elements from the demonstration HTML page
of the blueimp jQuery File Upload library. An open source project locatd here: http://blueimp.github.io/jQuery-File-Upload/
 -->

<!-- Force latest IE rendering engine or ChromeFrame if installed -->
<!--[if IE]>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<![endif]-->

<!-- blueimp Gallery styles - downloaded to make the resource local -->
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/blueimp-gallery.min.css")">
<!-- Generic page styles -->
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/style.css")">
<!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/jquery.fileupload.css")">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/jquery.fileupload-ui.css")">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/leaflet.css")">
<!-- CSS adjustments for browsers with JavaScript disabled -->
<noscript><link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/jquery.fileupload-noscript.css")"></noscript>
<noscript><link rel="stylesheet" href="@routes.Assets.at("stylesheets/file-uploader/jquery.fileupload-ui-noscript.css")"></noscript>

@main("Medici 2.0") {
<div class="container">
  <div class="page-header">
    <h1>File Upload for IMLCZO</h1>
  </div>
	   
    <!-- The file upload form used as target for the file upload widget -->
    <form id="fileupload" action='@routes.Files.upload' method="POST" enctype="multipart/form-data">
        <!-- Redirect browsers with JavaScript disabled to the origin page -->
        <noscript><input type="hidden" name="redirect" value="https://blueimp.github.io/jQuery-File-Upload/"></noscript>
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row fileupload-buttonbar">
            <div class="col-lg-7">
                <!-- The fileinput-button span is used to style the file input field as button -->
                <span class="btn btn-primary fileinput-button">
                    <i class="glyphicon glyphicon-plus"></i>
                    <span>Add files</span>
                    <input type="file" name="files[]" multiple>
                    <input type="hidden" name="datasetLevel" value="DatasetLevel">
                </span>
                <button type="submit" class="btn btn-default start">
                    <i class="glyphicon glyphicon-upload"></i>
                    <span>Start upload</span>
                </button>
                <button type="reset" class="btn btn-default cancel">
                    <i class="glyphicon glyphicon-ban-circle"></i>
                    <span>Cancel upload</span>
                </button>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <label>
                    <input type="checkbox" class="toggle"> Select all
                </label>
                <button type="button" class="btn btn-link delete" style="margin-bottom: 0px">
                    <i class="glyphicon glyphicon-trash"></i>
                    <span>Delete selected</span>
                </button>
                <!-- The global file processing state -->
                <span class="fileupload-process"></span>
                
            </div>
            <!-- The global progress state -->
            <div class="col-lg-5 fileupload-progress fade">
                <!-- The global progress bar -->
                <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar progress-bar-success" style="width:0%;"></div>
                </div>
                <!-- The extended global progress state -->
                <div class="progress-extended">&nbsp;</div>
            </div>
        </div>
        <!-- The table listing the files available for upload/download -->
        <table role="presentation" class="table table-striped"><tbody class="files"></tbody></table>
    </form>

    <form class="form-horizontal" role="form">

    <div class="row">
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">New Sensor</div>
                <div class="panel-body">
                    <p>Please provide information about the Sensor that was used to collect this data.</p>
                    <hr />
                        <div class="form-group">
                            <label for="sensorFullName" class="col-sm-4 paddingTop7 control-label"
                                   data-toggle="tooltip" data-placement="top"
                                   title="The full description of the sensor, typically provided by the Data Source. Should be concise, but descriptive.">Full Name</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorFullName" placeholder="White River Falls in Duvall County">
                            </div>
                            <label for="sensorShortName" class="col-sm-4 paddingTop7 control-label"
                                   data-toggle="tooltip" data-placement="top"
                                   title="A short name for this sensor when it is displayed along with many other sensors like on a map.">Short Name or Abbrev.</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorShortName" placeholder="White River Falls">
                            </div>
                            <label for="sensorID" class="col-sm-4 paddingTop7 control-label"
                                   data-toggle="tooltip" data-placement="top"
                                   title="A unique identifier for this sensor, if available.">Sensor ID</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorID" placeholder="DC105-WRF">
                            </div>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="sensorType" class="col-sm-4 paddingTop7 control-label"
                                   data-toggle="tooltip" data-html=true data-placement="top"
                                   title="Types can be found <a href='http://imlczo.org'>here</a>.">
                                Type
                            </label>
                            <div class="col-sm-8">
                                <select class="form-control input-sm" id="sensorType">
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                </select>
                            </div>
                            <label for="sensorMake" class="col-sm-4 paddingTop7 control-label">Make</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorMake" placeholder="PISCES">
                            </div>
                            <label for="sensorModel" class="col-sm-4 paddingTop7 control-label">Model</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorModel" placeholder="PT-5000">
                            </div>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="sensorSite" class="col-sm-4 paddingTop7 control-label">Site</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorSite" placeholder="White River">
                            </div>
                            <label for="map" class="col-sm-4 paddingTop7 control-label">Location</label>
                            <div class="col-sm-8">
                                <div id="map" style="border: 1px solid black; height: 200px;"></div>
                            </div>
                            <label for="sensorLocationLat" class="col-sm-4 paddingTop7 control-label"></label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control input-sm" id="sensorLocationLat" placeholder="latitude">
                            </div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control input-sm" id="sensorLocationLong" placeholder="longitude">
                            </div>
                            <label for="sensorOffsetDistance" class="col-sm-4 paddingTop7 control-label"
                                   data-toggle="tooltip" data-placement="top"
                                   title="An 'offset' sensor is below or above the surface.">
                                Offset Distance
                            </label>
                            <div class="col-sm-4">
                                <input type="text" class="form-control input-sm" id="sensorOffsetDistance" placeholder="5">
                            </div>
                            <div class="col-sm-4">
                                <input type="text" class="form-control input-sm" id="sensorOffsetUnits" placeholder="meters">
                            </div>
                            <label for="sensorOffsetType" class="col-sm-4 paddingTop7 control-label">Offset Type</label>
                            <div class="col-sm-8">
                                <select class="form-control input-sm" id="sensorOffsetType">
                                    <option>No offset</option>
                                    <option value="above">Above</option>
                                    <option value="below">Below</option>
                                </select>
                            </div>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="sensorSamplingInterval" class="col-sm-4 paddingTop7 control-label">Sampling Interval</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorSamplingInterval" placeholder="Sampling Interval">
                            </div>
                            <label for="sensorInstallationDate" class="col-sm-4 paddingTop7 control-label">Installation Date</label>
                            <div class="col-sm-8">
                                <input type="datetime" class="form-control input-sm" id="sensorInstallationDate" placeholder="YYYY/MM/DD">
                            </div>
                            <label for="sensorInstallationPeriod" class="col-sm-4 paddingTop7 control-label">Installation Period</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorInstallationPeriod" placeholder="2 weeks, etc.">
                            </div>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="sensorDataSource" class="col-sm-4 paddingTop7 control-label">Data Source</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorDataSource" placeholder="USGS">
                            </div>
                        </div>
                        <hr />
                        <div class="form-group">
                            <label for="sensorResearchTheme" class="col-sm-4 paddingTop7 control-label">Research Theme</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorResearchTheme" placeholder="Research Theme">
                            </div>
                            <label for="sensorOrigin" class="col-sm-4 paddingTop7 control-label">Origin</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="sensorOrigin" placeholder="Origin">
                            </div>
                            <label for="sensorSourceURL" class="col-sm-4 paddingTop7 control-label">Source URL</label>
                            <div class="col-sm-8">
                                <input type="url" class="form-control input-sm" id="sensorSourceURL" placeholder="http://example.com/...">
                            </div>
                        </div>
                        <hr />

                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">Sensor Parameters</div>
                <div class="panel-body">
                    <!--<form class="form-horizontal" role="form">-->
                    <div class="form-group">
                        <label for="sensorParametersAvailable" class="col-sm-4 paddingTop7 control-label"
                               data-toggle="tooltip" data-placement="top"
                               title="Select the parameters that should be visible on the Dashboard. Hold Command or Control to select multiple.">
                            Parameters to Display
                        </label>
                        <div class="col-sm-8">
                            <select multiple class="form-control" id="sensorParametersAvailable">
                                <option value="chlorophyll-a">Chlorophyll-a</option>
                                <option value="nitrogen">Nitrogen</option>
                                <option value="phosphorous">Phosphorous</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">

                    </div>
                    <div class="form-group">

                    </div>


                    <!--</form>-->
                </div>
            </div>

        </div>

        <div class="col-md-6">

            <div class="panel panel-default">
                <div class="panel-heading">Variable</div>
                <div class="panel-body">
                    <!--<form class="form-horizontal" role="form">-->
                        <div class="form-group">
                            <label for="variableName" class="col-sm-4 paddingTop7 control-label">Variable Name</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableName" placeholder="Variable Name">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="variableSpeciation" class="col-sm-4 paddingTop7 control-label">Variable Speciation</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableSpeciation" placeholder="Variable Speciation">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="variableAnalysisProc" class="col-sm-4 paddingTop7 control-label">Analysis Procedure / Method</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableAnalysisProc" placeholder="Analysis Procedure / Method">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="variableSampleMedium" class="col-sm-4 paddingTop7 control-label">Sample Medium</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableSampleMedium" placeholder="Sample Medium">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="variableUnits" class="col-sm-4 paddingTop7 control-label">Variable Units</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableUnits" placeholder="Variable Units">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="variableDataType" class="col-sm-4 paddingTop7 control-label">Variable Data Type</label>
                            <div class="col-sm-8">
                                <input type="text" class="form-control input-sm" id="variableDataType" placeholder="Variable Data Type">
                            </div>
                        </div>
                    <!--</form>-->
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">Measurement</div>
                <div class="panel-body">
                    <!--<form class="form-horizontal" role="form">-->
                    <div class="form-group">
                        <label for="measurementDateTime" class="col-sm-4 paddingTop7 control-label">Date and Time</label>
                        <div class="col-sm-8">
                            <input type="datetime" class="form-control input-sm" id="measurementDateTime" placeholder="YYYY-MM-DD:HH:MM:SS">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="measurementDataValue" class="col-sm-4 paddingTop7 control-label">Data Value</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" id="measurementDataValue" placeholder="50.95">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="measurementAccuracy" class="col-sm-4 paddingTop7 control-label">Accuracy</label>
                        <div class="col-sm-8">
                            <input type="number" class="form-control input-sm" id="measurementAccuracy" placeholder="0.95 or 1.0">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="measurementValueCategory" class="col-sm-4 paddingTop7 control-label">Value Category</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" id="measurementValueCategory" placeholder="Value Category">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="measurementCensoring" class="col-sm-4 paddingTop7 control-label">Censoring</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" id="measurementCensoring" placeholder="Censoring">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="measurementDataQualifyingComments" class="col-sm-4 paddingTop7 control-label">Data Qualifying Comments</label>
                        <div class="col-sm-8">
                            <textarea class="form-control input-sm" id="measurementDataQualifyingComments" placeholder="description"></textarea>
                        </div>
                    </div>
                    <!--</form>-->
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">Output</div>
                <div class="panel-body">
                    <!--<form class="form-horizontal" role="form">-->
                    <div class="form-group">
                        <label for="outputFileFormat" class="col-sm-4 paddingTop7 control-label">Output Data File Format</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" id="outputFileFormat" placeholder=".csv">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="outputDownloadingMethod" class="col-sm-4 paddingTop7 control-label">Downloading Method</label>
                        <div class="col-sm-8">
                            <input type="text" class="form-control input-sm" id="outputDownloadingMethod" placeholder="http://example.com/...">
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">Miscellaneous</div>
                <div class="panel-body">
                    <!--<form class="form-horizontal" role="form">-->
                    <div class="form-group">
                        <label for="miscSpecialFeatures" class="col-sm-4 paddingTop7 control-label">Special Features</label>
                        <div class="col-sm-8">
                            <textarea class="form-control input-sm" id="miscSpecialFeatures" placeholder="special features of note..."></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="miscInformation" class="col-sm-4 paddingTop7 control-label">Miscellaneous Information</label>
                        <div class="col-sm-8">
                            <textarea class="form-control input-sm" id="miscInformation" placeholder="additional information..."></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
        </div>
    </div>
    </form>
</div>
	
	<!-- The blueimp Gallery widget -->
<div id="blueimp-gallery" class="blueimp-gallery blueimp-gallery-controls" data-filter=":even">
    <div class="slides"></div>
    <h3 class="title"></h3>
    <a class="prev">‹</a>
    <a class="next">›</a>
    <a class="close">×</a>
    <a class="play-pause"></a>
    <ol class="indicator"></ol>
</div>

<!-- The template to display files available for upload -->
<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td>
            <span class="preview"></span>
        </td>
        <td>
            <p class="name">{%=file.name%}</p>
            <strong class="error text-danger"></strong>
        </td>
        <td>
            <p class="size">Processing...</p>
            <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="progress-bar progress-bar-success" style="width:0%;"></div></div>
        </td>
        <td>
            {% if (!i && !o.options.autoUpload) { %}
                <button class="btn btn-primary start" disabled>
                    <i class="glyphicon glyphicon-upload"></i>
                    <span>Start</span>
                </button>
            {% } %}
            {% if (!i) { %}
                <button class="btn btn-default cancel">
                    <i class="glyphicon glyphicon-ban-circle"></i>
                    <span>Cancel</span>
                </button>
            {% } %}
        </td>
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.deleteUrl) { %}
        <td>
            <input type="checkbox" name="delete" value="1" class="toggle">
        </td>
        {% } %}
        <td>
            <span class="preview">
                {% if (file.thumbnailUrl) { %}
                    <a href="{%=file.url%}" title="{%=file.name%}" download="{%=file.name%}" data-gallery><img src="{%=file.thumbnailUrl%}"></a>
                {% } %}
            </span>
        </td>
        <td>
            <p class="name">
                {% if (file.url) { %}
                    <a href="{%=file.url%}" title="{%=file.name%}" target="_blank" {%=file.thumbnailUrl?'data-gallery':''%}>{%=file.name%}</a>
                {% } else { %}
                    <span>{%=file.name%}</span>
                {% } %}
            </p>
            {% if (file.error) { %}
                <div><span class="label label-danger">Error</span> {%=file.error%}</div>
            {% } %}
        </td>
        <td>
            <span class="size">{%=o.formatFileSize(file.size)%}</span>
        </td>
        <td>
            {% if (file.deleteUrl) { %}
                <button class="btn btn-danger delete" data-type="{%=file.deleteType%}" data-url="{%=file.deleteUrl%}"{% if (file.deleteWithCredentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                    <i class="glyphicon glyphicon-trash"></i>
                    <span>Delete</span>
                </button>
            {% } else { %}
                <button class="btn btn-default cancel">
                    <i class="glyphicon glyphicon-ban-circle"></i>
                    <span>Cancel</span>
                </button>
            {% } %}
        </td>
    </tr>
{% } %}
</script>

<!-- downloaded to make the resource local -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.min.js")"></script>
<!-- bootstrap required for tooltip -->
<script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script>
<!-- leaflet for the map -->
<script src="@routes.Assets.at("javascripts/leaflet.js")"></script>
<!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included - downloaded to make the resource local -->
<script src="@routes.Assets.at("javascripts/file-uploader/vendor/jquery.ui.widget.js")"></script>
<!-- The Templates plugin is included to render the upload/download listings - downloaded to make the resource local -->
<script src="@routes.Assets.at("javascripts/file-uploader/tmpl.min.js")"></script>
<!-- The Load Image plugin is included for the preview images and image resizing functionality - downloaded to make the resource local -->
<script src="@routes.Assets.at("javascripts/file-uploader/load-image.all.min.js")"></script>
<!-- The Canvas to Blob plugin is included for image resizing functionality - downloaded to make the resource local -->
<script src="@routes.Assets.at("javascripts/file-uploader/canvas-to-blob.min.js")"></script>
<!-- blueimp Gallery script - downloaded to make the resource local-->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.blueimp-gallery.min.js")"></script>
<!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.iframe-transport.js")"></script>
<!-- The basic File Upload plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload.js")"></script>
<!-- The File Upload processing plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-process.js")"></script>
<!-- The File Upload image preview & resize plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-image.js")"></script>
<!-- The File Upload audio preview plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-audio.js")"></script>
<!-- The File Upload video preview plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-video.js")"></script>
<!-- The File Upload validation plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-validate.js")"></script>
<!-- The File Upload user interface plugin -->
<script src="@routes.Assets.at("javascripts/file-uploader/jquery.fileupload-ui.js")"></script>
<!-- The main application script -->
<script src="@routes.Assets.at("javascripts/file-uploader/main.js")"></script>
<!-- The XDomainRequest Transport is included for cross-domain file deletion for IE 8 and IE 9 -->
<!--[if (gte IE 8)&(lt IE 10)]>
<script src="js/cors/jquery.xdr-transport.js"></script>
<![endif]-->

<script type="text/javascript">
if (window.jQuery) {
    $('[data-toggle="tooltip"]').tooltip()
}

$(window).load(function() {
    if (window.L) {
        var map = L.map('map').setView([39, -90 ], 5);

        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        var marker = L.marker([39, -90], {draggable: true});
        marker.addTo(map);
        marker.on('dragend', function(event){
            $('#sensorLocationLat').val(event.target._latlng.lat);
            $('#sensorLocationLong').val(event.target._latlng.lng);
        })
    } else {
        console.log('no L found');
    }
})
</script>
}
